export type RiskLevel = 'low' | 'medium' | 'high';

export class PlinkoGameProfiles {

    /**
     * Multiplier tables indexed by risk level and row count.
     * Index in array = bucket position (0 = leftmost, rows = rightmost).
     * Values captured directly from duel.com/plinko UI on 2026-02-17.
     * Display note: "1k" â†’ 1000, values without "x" suffix are plain numbers.
     */
    public static readonly MULTIPLIERS: Record<RiskLevel, Record<number, number[]>> = {
        low: {
            8:  [5.7, 2.1, 1.1, 1.0, 0.5, 1.0, 1.1, 2.1, 5.7],
            9:  [5.7, 2.0, 1.6, 1.0, 0.7, 0.7, 1.0, 1.6, 2.0, 5.7],
            10: [9.0, 3.0, 1.4, 1.1, 1.0, 0.5, 1.0, 1.1, 1.4, 3.0, 9.0],
            11: [8.5, 3.0, 1.9, 1.3, 1.0, 0.7, 0.7, 1.0, 1.3, 1.9, 3.0, 8.5],
            12: [10.0, 3.0, 1.6, 1.4, 1.1, 1.0, 0.5, 1.0, 1.1, 1.4, 1.6, 3.0, 10.0],
            13: [8.2, 4.0, 3.0, 1.9, 1.2, 0.9, 0.7, 0.7, 0.9, 1.2, 1.9, 3.0, 4.0, 8.2],
            14: [7.2, 4.0, 1.9, 1.4, 1.3, 1.1, 1.0, 0.5, 1.0, 1.1, 1.3, 1.4, 1.9, 4.0, 7.2],
            15: [15.0, 8.1, 3.0, 2.0, 1.5, 1.1, 1.0, 0.7, 0.7, 1.0, 1.1, 1.5, 2.0, 3.0, 8.1, 15.0],
            16: [16.0, 9.1, 2.0, 1.4, 1.4, 1.2, 1.1, 1.0, 0.5, 1.0, 1.1, 1.2, 1.4, 1.4, 2.0, 9.1, 16.0],
        },
        medium: {
            8:  [13.0, 3.0, 1.3, 0.7, 0.4, 0.7, 1.3, 3.0, 13.0],
            9:  [18.0, 4.0, 1.7, 0.9, 0.5, 0.5, 0.9, 1.7, 4.0, 18.0],
            10: [22.0, 5.1, 2.0, 1.4, 0.6, 0.4, 0.6, 1.4, 2.0, 5.1, 22.0],
            11: [24.0, 6.1, 3.0, 1.8, 0.7, 0.5, 0.5, 0.7, 1.8, 3.0, 6.1, 24.0],
            12: [33.0, 11.0, 4.0, 2.0, 1.1, 0.6, 0.3, 0.6, 1.1, 2.0, 4.0, 11.0, 33.0],
            13: [43.0, 13.0, 6.1, 3.0, 1.3, 0.7, 0.4, 0.4, 0.7, 1.3, 3.0, 6.1, 13.0, 43.0],
            14: [59.0, 15.0, 7.1, 4.0, 1.9, 1.0, 0.5, 0.2, 0.5, 1.0, 1.9, 4.0, 7.1, 15.0, 59.0],
            15: [89.0, 18.0, 11.0, 5.0, 3.0, 1.3, 0.5, 0.3, 0.3, 0.5, 1.3, 3.0, 5.0, 11.0, 18.0, 89.0],
            16: [111.0, 41.0, 10.0, 5.0, 3.0, 1.5, 1.0, 0.5, 0.3, 0.5, 1.0, 1.5, 3.0, 5.0, 10.0, 41.0, 111.0],
        },
        high: {
            8:  [29.0, 4.0, 1.5, 0.3, 0.2, 0.3, 1.5, 4.0, 29.0],
            9:  [43.0, 7.1, 2.0, 0.6, 0.2, 0.2, 0.6, 2.0, 7.1, 43.0],
            10: [77.0, 10.0, 3.0, 0.9, 0.3, 0.2, 0.3, 0.9, 3.0, 10.0, 77.0],
            11: [121.0, 14.0, 5.2, 1.4, 0.4, 0.2, 0.2, 0.4, 1.4, 5.2, 14.0, 121.0],
            12: [171.0, 24.0, 8.2, 2.0, 0.7, 0.2, 0.2, 0.2, 0.7, 2.0, 8.2, 24.0, 171.0],
            13: [262.0, 37.0, 11.0, 4.0, 1.0, 0.2, 0.2, 0.2, 0.2, 1.0, 4.0, 11.0, 37.0, 262.0],
            14: [424.0, 57.0, 18.0, 5.0, 1.9, 0.3, 0.2, 0.2, 0.2, 0.3, 1.9, 5.0, 18.0, 57.0, 424.0],
            15: [625.0, 84.0, 27.0, 8.1, 3.0, 0.5, 0.2, 0.2, 0.2, 0.2, 0.5, 3.0, 8.1, 27.0, 84.0, 625.0],
            16: [1000.0, 131.0, 26.0, 9.1, 4.0, 2.0, 0.2, 0.2, 0.2, 0.2, 0.2, 2.0, 4.0, 9.1, 26.0, 131.0, 1000.0],
        },
    };

    public static getMultiplier(risk: RiskLevel, rows: number, bucketPosition: number): number {
        const table = PlinkoGameProfiles.MULTIPLIERS[risk][rows];
        if (!table) {
            throw new Error(`Invalid config: risk=${risk}, rows=${rows}`);
        }
        if (bucketPosition < 0 || bucketPosition > rows) {
            throw new Error(`bucketPosition ${bucketPosition} out of range for rows=${rows}`);
        }
        return table[bucketPosition];
    }
}
